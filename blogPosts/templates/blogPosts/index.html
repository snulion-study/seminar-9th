{% extends 'base.html' %}
{% load static %}
{% block js %}
<script type="module" src="{% static 'blogPosts/js/index.js' %}"></script>
{% endblock js %}
{% block content %}
<div class="tag-search-container">
  <div class="tag-container">
    태그
    {% for tag in tags %}
    <a href="{% url 'tags:read' id=tag.id %}">{{ tag.content }}</a>
    {% endfor %}
    {% if user.is_authenticated %}
    <form action="{% url 'tags:create' %}" method="POST">
      {% csrf_token %}
      <input type="text" name="content" />
      <button type="submit">태그 추가</button>
    </form>
    {% endif %}
  </div>
  <div class="search-container">
    <input id="search-bar" type="text" placeholder="타이틀을 입력해주세요">
    <button id="search-btn">검색</button>
    <button id="reset-btn">리셋</button>
  </div>
</div>
<div class="post-container">
  <h1 class="container-title">POSTS
    {% if user.is_authenticated %}
    <a href="{% url 'blogPosts:new' %}"
      class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored">
      <i class="material-icons">add</i>
    </a>
    {% endif %}
  </h1>
  <div class="card-container">
    {% for post in posts %}
    <!-- Square card -->
    <div class="demo-card-square mdl-card mdl-shadow--2dp index-post-title">
      <div class="card-header">
        <span class="post-author">
          <button class="mdl-button mdl-js-button mdl-button--icon">
            <i class="material-icons">mood</i>
          </button>
          <span>{{ post.author }}</span>
        </span>
        <a href="{% url 'blogPosts:like' id=post.id %}" class="material-icons mdl-badge mdl-badge--overlap"
          data-badge="{{ post.like_users.count }}">
          {% if user in post.like_users.all %}
          <i class="material-icons">favorite</i>
          {% else %}
          <i class="material-icons">favorite_border</i>
          {% endif %}
        </a>
      </div>
      <div class="mdl-card__title mdl-card--expand">
        <h2 class="mdl-card__title-text">
          <a href="{% url 'blogPosts:show' post.id %}">
            {{ post.title }}
          </a>
        </h2>
      </div>
      <div class="mdl-card__supporting-text">
        {{ post.content }}
      </div>
      <div class="mdl-card__actions mdl-card--border">
        {% if post.tags.count > 0 %}
        <span class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
          {% for tag in post.tags.all %}
          #{{ tag.content }}
          {% endfor %}
        </span>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock content %}
